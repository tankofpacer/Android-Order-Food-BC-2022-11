Index: app/src/main/res/values/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n    <string name=\"app_name\">网上订餐</string>\r\n    <string name=\"login_text\">登录</string>\r\n    <string name=\"login_btn_text\">开始美食之旅</string>\r\n    <string name=\"login_username_hint\">请输入用户名或手机号</string>\r\n    <string name=\"login_password_hint\">请输入密码</string>\r\n    <string name=\"signup_username_hint\">请输入用户名</string>\r\n    <string name=\"signup_phoneNumber_hint\" translatable=\"false\">请输入您的手机号（中国）</string>\r\n    <string name=\"signup_text\" translatable=\"false\">注册</string>\r\n    <string name=\"login_signup\" translatable=\"false\">没有账号？</string>\r\n    <string name=\"buttomAdd\">加入购物车</string>\r\n    <string name=\"buttonSub\" >从购物车去除</string>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
--- a/app/src/main/res/values/strings.xml	(revision 3c0f1d609c3eb599028388c76fa0c987a45e41cb)
+++ b/app/src/main/res/values/strings.xml	(date 1665505349862)
@@ -9,5 +9,6 @@
     <string name="signup_text" translatable="false">注册</string>
     <string name="login_signup" translatable="false">没有账号？</string>
     <string name="buttomAdd">加入购物车</string>
-    <string name="buttonSub" >从购物车去除</string>
+    <string name="buttonSub">从购物车去除</string>
+
 </resources>
\ No newline at end of file
Index: app/src/main/java/com/example/Android_bigWork/Fragments/DetailFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.Android_bigWork.Fragments;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.ViewModelProvider;\r\n\r\nimport com.example.Android_bigWork.Adapters.FoodStickyAdapter;\r\nimport com.example.Android_bigWork.Entity.Dish;\r\nimport com.example.Android_bigWork.R;\r\nimport com.example.Android_bigWork.ViewModels.DetailViewModel;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport se.emilsjolander.stickylistheaders.StickyListHeadersListView;\r\n\r\npublic class DetailFragment extends Fragment {\r\n\r\n    private DetailViewModel mViewModel;\r\n    private StickyListHeadersListView stickyList;\r\n\r\n    //for test\r\n    private ArrayList<Dish> dishListForTest;\r\n\r\n    public static DetailFragment newInstance() {\r\n        return new DetailFragment();\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container,\r\n                             @Nullable Bundle savedInstanceState) {\r\n//        binding= DataBindingUtil.inflate(inflater,R.layout.fragment_detail,container,false);\r\n//        binding.setLifecycleOwner(getActivity());\r\n\r\n        // for test\r\n        dishListForTest=new ArrayList<>();\r\n        dishListForTest.add(new Dish(111,\"TEST DISH\",\"none\",2.5,\"OEW\",false));\r\n        dishListForTest.add(new Dish(111,\"TEST DISH\",\"none\",2.5,\"OEW\",false));\r\n        dishListForTest.add(new Dish(111,\"TEST DISH\",\"none\",2.5,\"OEW\",false));\r\n        dishListForTest.add(new Dish(111,\"TEST DISH\",\"none\",2.5,\"OEW\",false));\r\n        dishListForTest.add(new Dish(111,\"TEST DISH\",\"none\",2.5,\"OEW\",false));\r\n        dishListForTest.add(new Dish(111,\"TEST DISH\",\"none\",2.5,\"OEW\",false));\r\n        dishListForTest.add(new Dish(111,\"TEST DISH\",\"none\",2.5,\"OEW\",false));\r\n        dishListForTest.add(new Dish(111,\"TEST DISH\",\"none\",2.5,\"OEW\",false));\r\n        dishListForTest.add(new Dish(111,\"TEST DISH\",\"none\",2.5,\"OEW\",false));\r\n        dishListForTest.add(new Dish(111,\"TEST DISH\",\"none\",2.5,\"OEW\",false));\r\n\r\n        dishListForTest.add(new Dish(211,\"TEST DISH\",\"none\",2.5,\"NEW\",false));\r\n        dishListForTest.add(new Dish(211,\"TEST DISH\",\"none\",2.5,\"NEW\",false));\r\n        dishListForTest.add(new Dish(211,\"TEST DISH\",\"none\",2.5,\"NEW\",false));\r\n        dishListForTest.add(new Dish(211,\"TEST DISH\",\"none\",2.5,\"NEW\",false));\r\n        dishListForTest.add(new Dish(211,\"TEST DISH\",\"none\",2.5,\"NEW\",false));\r\n        dishListForTest.add(new Dish(211,\"TEST DISH\",\"none\",2.5,\"NEW\",false));\r\n        dishListForTest.add(new Dish(211,\"TEST DISH\",\"none\",2.5,\"OEW\",false));\r\n        dishListForTest.add(new Dish(211,\"TEST DISH\",\"none\",2.5,\"NEW\",false));\r\n        dishListForTest.add(new Dish(211,\"TEST DISH\",\"none\",2.5,\"NEW\",false));\r\n        dishListForTest.add(new Dish(211,\"TEST DISH\",\"none\",2.5,\"NEW\",false));\r\n\r\n        dishListForTest.add(new Dish(211,\"TEST DISH\",\"none\",2.5,\"NEW\",false));\r\n\r\n\r\n\r\n//        return binding.getRoot();\r\n        return inflater.inflate(R.layout.fragment_detail, container, false);\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n        mViewModel = new ViewModelProvider(this).get(DetailViewModel.class);\r\n        stickyList=(StickyListHeadersListView) view.findViewById(R.id.showdishes);\r\n        FoodStickyAdapter foodStickyAdapter=new FoodStickyAdapter(getContext(),dishListForTest);\r\n        stickyList.setAdapter(foodStickyAdapter);\r\n        // TODO: Use the ViewModel\r\n\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/Android_bigWork/Fragments/DetailFragment.java b/app/src/main/java/com/example/Android_bigWork/Fragments/DetailFragment.java
--- a/app/src/main/java/com/example/Android_bigWork/Fragments/DetailFragment.java	(revision 3c0f1d609c3eb599028388c76fa0c987a45e41cb)
+++ b/app/src/main/java/com/example/Android_bigWork/Fragments/DetailFragment.java	(date 1665504923423)
@@ -38,31 +38,33 @@
 //        binding.setLifecycleOwner(getActivity());
 
         // for test
-        dishListForTest=new ArrayList<>();
-        dishListForTest.add(new Dish(111,"TEST DISH","none",2.5,"OEW",false));
-        dishListForTest.add(new Dish(111,"TEST DISH","none",2.5,"OEW",false));
-        dishListForTest.add(new Dish(111,"TEST DISH","none",2.5,"OEW",false));
-        dishListForTest.add(new Dish(111,"TEST DISH","none",2.5,"OEW",false));
-        dishListForTest.add(new Dish(111,"TEST DISH","none",2.5,"OEW",false));
-        dishListForTest.add(new Dish(111,"TEST DISH","none",2.5,"OEW",false));
-        dishListForTest.add(new Dish(111,"TEST DISH","none",2.5,"OEW",false));
-        dishListForTest.add(new Dish(111,"TEST DISH","none",2.5,"OEW",false));
-        dishListForTest.add(new Dish(111,"TEST DISH","none",2.5,"OEW",false));
-        dishListForTest.add(new Dish(111,"TEST DISH","none",2.5,"OEW",false));
+        dishListForTest = new ArrayList<>();
+        dishListForTest.add(new Dish(111, "TEST DISH", "none", 2.5, "OEW", false));
+        dishListForTest.add(new Dish(111, "TEST DISH", "none", 2.5, "OEW", false));
+        dishListForTest.add(new Dish(111, "TEST DISH", "none", 2.5, "OEW", false));
+        dishListForTest.add(new Dish(111, "TEST DISH", "none", 2.5, "OEW", false));
+        dishListForTest.add(new Dish(111, "TEST DISH", "none", 2.5, "OEW", false));
+        dishListForTest.add(new Dish(111, "TEST DISH", "none", 2.5, "OEW", false));
+        dishListForTest.add(new Dish(111, "TEST DISH", "none", 2.5, "OEW", false));
+        dishListForTest.add(new Dish(111, "TEST DISH", "none", 2.5, "OEW", false));
+        dishListForTest.add(new Dish(111, "TEST DISH", "none", 2.5, "OEW", false));
+        dishListForTest.add(new Dish(111, "TEST DISH", "none", 2.5, "OEW", false));
 
-        dishListForTest.add(new Dish(211,"TEST DISH","none",2.5,"NEW",false));
-        dishListForTest.add(new Dish(211,"TEST DISH","none",2.5,"NEW",false));
-        dishListForTest.add(new Dish(211,"TEST DISH","none",2.5,"NEW",false));
-        dishListForTest.add(new Dish(211,"TEST DISH","none",2.5,"NEW",false));
-        dishListForTest.add(new Dish(211,"TEST DISH","none",2.5,"NEW",false));
-        dishListForTest.add(new Dish(211,"TEST DISH","none",2.5,"NEW",false));
-        dishListForTest.add(new Dish(211,"TEST DISH","none",2.5,"OEW",false));
-        dishListForTest.add(new Dish(211,"TEST DISH","none",2.5,"NEW",false));
-        dishListForTest.add(new Dish(211,"TEST DISH","none",2.5,"NEW",false));
-        dishListForTest.add(new Dish(211,"TEST DISH","none",2.5,"NEW",false));
+        dishListForTest.add(new Dish(211, "TEST DISH", "none", 2.5, "NEW", false));
+        dishListForTest.add(new Dish(211, "TEST DISH", "none", 2.5, "NEW", false));
+        dishListForTest.add(new Dish(211, "TEST DISH", "none", 2.5, "NEW", false));
+        dishListForTest.add(new Dish(211, "TEST DISH", "none", 2.5, "NEW", false));
+        dishListForTest.add(new Dish(211, "TEST DISH", "none", 2.5, "NEW", false));
+        dishListForTest.add(new Dish(211, "TEST DISH", "none", 2.5, "NEW", false));
+        dishListForTest.add(new Dish(211, "TEST DISH", "none", 2.5, "OEW", false));
+        dishListForTest.add(new Dish(211, "TEST DISH", "none", 2.5, "NEW", false));
+        dishListForTest.add(new Dish(211, "TEST DISH", "none", 2.5, "NEW", false));
+        dishListForTest.add(new Dish(211, "TEST DISH", "none", 2.5, "NEW", false));
 
-        dishListForTest.add(new Dish(211,"TEST DISH","none",2.5,"NEW",false));
+        dishListForTest.add(new Dish(211, "TEST DISH", "none", 2.5, "NEW", false));
 
+        //读取values中name="buttomAdd"的值
+        String buttomAdd = getResources().getString(R.string.buttomAdd);
 
 
 //        return binding.getRoot();
@@ -73,8 +75,8 @@
     public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {
         super.onViewCreated(view, savedInstanceState);
         mViewModel = new ViewModelProvider(this).get(DetailViewModel.class);
-        stickyList=(StickyListHeadersListView) view.findViewById(R.id.showdishes);
-        FoodStickyAdapter foodStickyAdapter=new FoodStickyAdapter(getContext(),dishListForTest);
+        stickyList = (StickyListHeadersListView) view.findViewById(R.id.showdishes);
+        FoodStickyAdapter foodStickyAdapter = new FoodStickyAdapter(getContext(), dishListForTest);
         stickyList.setAdapter(foodStickyAdapter);
         // TODO: Use the ViewModel
 
Index: app/src/main/java/com/example/Android_bigWork/Activity/SignUpActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.Android_bigWork.Activity;\r\n\r\nimport static com.example.Android_bigWork.Utils.KeyboardUtils.hideKeyboard;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.EditText;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.Android_bigWork.Database.PersonDao;\r\nimport com.example.Android_bigWork.Database.PersonDatabase;\r\nimport com.example.Android_bigWork.Entity.PersonEntity;\r\nimport com.example.Android_bigWork.R;\r\nimport com.example.Android_bigWork.Utils.HandlerAction;\r\nimport com.example.Android_bigWork.Utils.SubmitButton;\r\nimport com.example.Android_bigWork.Utils.SwitchButton;\r\n\r\n/**\r\n * @author Anduin9527\r\n * @Type SignUpActivity\r\n * @Desc 注册界面\r\n * @date 2022/10/9 20:09\r\n */\r\npublic class SignUpActivity extends AppCompatActivity\r\n        implements HandlerAction {\r\n    EditText mUsername, mPassword, mPhoneNumber;\r\n    SubmitButton mSignUpButton;\r\n    SwitchButton mGender;\r\n\r\n    @Override\r\n    public void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        //去掉标题栏\r\n        if (getSupportActionBar() != null) {\r\n            getSupportActionBar().hide();\r\n        }\r\n        setContentView(R.layout.signup_activity);\r\n\r\n        mUsername = findViewById(R.id.textView_username);\r\n        mPassword = findViewById(R.id.textView_password);\r\n        mPhoneNumber = findViewById(R.id.textView_phoneNumber);\r\n        mGender = findViewById(R.id.SwitchButton_gender);\r\n        mSignUpButton = findViewById(R.id.btn_signup);\r\n\r\n        Intent navigateToLogin = new Intent(this, LoginActivity.class);\r\n\r\n        //设置电话号码输入框只能输入数字\r\n        mPhoneNumber.setInputType(android.text.InputType.TYPE_CLASS_NUMBER);\r\n\r\n        final int[] isFemale = {0};\r\n        //获取数据库\r\n        PersonDatabase personDatabase = PersonDatabase.getDatabase(this);\r\n        PersonDao personDao = personDatabase.getPersonDao();\r\n        //添加男女选择监听器\r\n        mGender.setOnClickListener(v -> {\r\n            if (mGender.isChecked())\r\n                isFemale[0] = 1;\r\n            else\r\n                isFemale[0] = 0;\r\n        });\r\n\r\n        //注册按钮监听器\r\n        findViewById(R.id.btn_signup).setOnClickListener(v -> {\r\n            mSignUpButton.showProgress();\r\n            String username = this.mUsername.getText().toString();\r\n            String password = this.mPassword.getText().toString();\r\n            String phoneNumber = this.mPhoneNumber.getText().toString();\r\n            //判断是否为空\r\n            if (checkEmpty(username, password, phoneNumber)) {\r\n                //查询数据库\r\n                if (checkDataBase(username, password, phoneNumber, personDao)) {\r\n                    //添加用户\r\n                    PersonEntity personEntity = new PersonEntity(username, password, Long.parseLong(phoneNumber), isFemale[0]);\r\n                    personDao.insert(personEntity);\r\n                    Toast.makeText(this, \"注册成功\", Toast.LENGTH_SHORT).show();\r\n                    //跳转到登录界面\r\n                    postDelayed(() -> {\r\n                        mSignUpButton.showSucceed();\r\n                        postDelayed(() -> {\r\n                            navigateToLogin.putExtra(\"username\", username);\r\n                            navigateToLogin.putExtra(\"password\", password);\r\n                            startActivity(navigateToLogin);\r\n                        }, 1000);\r\n                        //关闭注册页面\r\n                    }, 100);\r\n                }\r\n            }\r\n        });\r\n\r\n        //点击到img则收起键盘\r\n        findViewById(R.id.imageView_bg).setOnClickListener(v -> {\r\n            //检测是否有焦点\r\n            if (mUsername.isFocused() || mPassword.isFocused()) {\r\n                //清除焦点\r\n                mUsername.clearFocus();\r\n                mPassword.clearFocus();\r\n            }\r\n            //收起键盘\r\n            hideKeyboard(this);\r\n        });\r\n    }\r\n\r\n    private boolean checkDataBase(String username, String password, String phoneNumber, PersonDao personDao) {\r\n        //查询数据库\r\n        if (personDao.checkUsername(username) != null) {\r\n            Toast.makeText(this, \"用户名已存在\", Toast.LENGTH_SHORT).show();\r\n            mSignUpButton.showError(3000);\r\n        } else if (personDao.checkPhoneNumber(Long.parseLong(phoneNumber)) != null) {\r\n            Toast.makeText(this, \"手机号已存在\", Toast.LENGTH_SHORT).show();\r\n            mSignUpButton.showError(3000);\r\n        } else if (phoneNumber.length() != 11) {\r\n            Toast.makeText(this, \"手机号格式错误\", Toast.LENGTH_SHORT).show();\r\n            mSignUpButton.showError(3000);\r\n        } else if (password.length() < 6) {\r\n            Toast.makeText(this, \"密码长度不足6位\", Toast.LENGTH_SHORT).show();\r\n            mSignUpButton.showError(3000);\r\n        } else {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private boolean checkEmpty(String username, String password, String phoneNumber) {\r\n        if (username.isEmpty()) {\r\n            Toast.makeText(this, \"用户名不能为空\", Toast.LENGTH_SHORT).show();\r\n            mSignUpButton.showError(3000);\r\n        } else if (password.isEmpty()) {\r\n            Toast.makeText(this, \"密码不能为空\", Toast.LENGTH_SHORT).show();\r\n            mSignUpButton.showError(3000);\r\n        } else if (phoneNumber.isEmpty()) {\r\n            Toast.makeText(this, \"手机号不能为空\", Toast.LENGTH_SHORT).show();\r\n            mSignUpButton.showError(3000);\r\n        } else {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/Android_bigWork/Activity/SignUpActivity.java b/app/src/main/java/com/example/Android_bigWork/Activity/SignUpActivity.java
--- a/app/src/main/java/com/example/Android_bigWork/Activity/SignUpActivity.java	(revision 3c0f1d609c3eb599028388c76fa0c987a45e41cb)
+++ b/app/src/main/java/com/example/Android_bigWork/Activity/SignUpActivity.java	(date 1665505702082)
@@ -83,9 +83,9 @@
                             navigateToLogin.putExtra("username", username);
                             navigateToLogin.putExtra("password", password);
                             startActivity(navigateToLogin);
+                            finish();
                         }, 1000);
-                        //关闭注册页面
-                    }, 100);
+                    }, 0);
                 }
             }
         });
